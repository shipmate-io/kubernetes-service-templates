api: v1

meta:
  name: HTML
  description: Static HTML service

form:

  - name: Source code
    questions:

      - name: Path to HTML source code
        description: >
          The directory in your Git repository that contains your static HTML files.
        variable: path_to_source_code
        type: file_path
        default: /

deployment:

  - type: image
    name: html
    dockerfile: Dockerfile
    files:
      - "{{ path('code-repository', variable.path_to_source_code, '**') }}"
      - server.conf

  - type: stateless_set
    name: html
    containers:
      - name: html
        image: "{* image.html *}"
        memory:
          min: 32
          max: 256
        cpus:
          min: 50
          max: 500

  - type: entrypoint
    name: html
    alias: HTML service
    target: "{* stateless_set.html *}"
    port: 8080

interface:

  - type: logs
    name: NGINX error logs
    source: "{* stateless_set.html *}"
